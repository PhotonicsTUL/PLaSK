<?xml version="1.0" ?>
<solvers>
  
  <solver name="Fourier2D" category="optical" lib="slab">
    Vectorial optical solver based on the plane-wave reflection transfer method.

    <geometry type="Cartesian2D"/>

    <tag name="expansion" label="Details on Fourier expansion">
      Details on Fourier expansion used in computations
      <attr name="size" label="Expansion size" type="int">Expansion size.</attr>
      <attr name="refine" label="Averaging points" type="int">Number of refinement points for refractive index averaging.</attr>
      <attr name="smooth" label="Smoothing parameter" type="float">Smoothing parameter for material boundaries (increases convergence).</attr>
      <attr name="group-layers" label="Layers grouping" type="bool">Should similar layers be grouped for better performance.</attr>
    </tag>

    <tag name="interface" label="Matching interface position in the stack &lt;span style=&quot;font-weight: normal;&quot;&gt;(set only one)&lt;/span&gt;">
      Matching interface position in the stack.
      <attr name="index" label="Layer index" type="int">Index of the layer, below which the interface is located.</attr>
      <attr name="position" label="Position" type="float" unit="µm">Interface will be located as close as possible to the vertical coordinate specified in this attribute.</attr>
      <attr name="object" label="Object name">Name of the geometry object below which the interface is located.</attr>
      <attr name="path" label="Object path">Optional path name, specifying particular instance of the object given in the object attribute.</attr>
    </tag>

    <tag name="vpml" label="Vertical PMLs">
      Vertical absorbing perfectly matched layer boundary conditions parameters.
      <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
      <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
      <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
    </tag>

    <tag name="transfer" label="Transfer algorithm settings">
      Vertical field transfer settings.
      <attr name="method" label="Transfer method" type="choice">
        Layers transfer algorithm. Can be either reflection transfer, admittance transfer or automatic, in which case the reflection computations will use reflection transfer and eigenmode search is done with admittance transfer.
        <choice>auto</choice>
        <choice>reflection</choice>
        <choice>admittance</choice>
      </attr>
    </tag>

    <tag name="pml" label="Horizontal PMLs">
      Side absorbing perfectly matched layer boundary conditions parameters.
      <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
      <attr name="order" label="Shape order" type="float">PML shape order (0 → flat, 1 → linearly increasing, 2 → quadratic, etc.).</attr>
      <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
      <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
    </tag>

    <tag name="mode" label="Mode properties">
      Mode properties.
      <attr name="wavelength" label="Wavelength" type="float" unit="nm">Light wavelength.</attr>
      <attr name="k-tran" label="Transverse wave-vector" type="float" unit="1/µm">Transverse wave-vector component.</attr>
      <attr name="k-long" label="Longitudinal wave-vector" type="float" unit="1/µm">Longitudinal wave-vector component.</attr>
      <attr name="symmetry" label="Mode symmetry" type="choice">
        Mode symmetry. Specify a symmetric field component here (e.g. '&lt;i&gt;Etran&lt;/i&gt;', '&lt;i&gt;Hx&lt;/i&gt;').
        <choice>Etran</choice>
        <choice>Elong</choice>
      </attr>
      <attr name="polarization" label="Mode polarization" type="choice">
        Mode polarization. Give an existing field component here (e.g. '&lt;i&gt;Etran&lt;/i&gt;', '&lt;i&gt;Hx&lt;/i&gt;').
        <choice>Etran</choice>
        <choice>Elong</choice>
      </attr>
    </tag>

    <tag name="root" label="Parameters of the root-finding algorithm">
      Parameters of the global root-finding algorithm.
      <attr name="method" label="Root finding method" type="choice">
        Root finding algorithm (Muller's method or Broyden's method).
        <choice>muller</choice>
        <choice>broyden</choice>
        <choice>brent</choice>
      </attr>
      <attr name="tolx" label="Tolerance on argument" type="float">Maximum change of the argument which is allowed for convergent solution.</attr>
      <attr name="tolf-min" label="Sufficient determinant value" type="float">Minimum value of the determinant sufficient to assume convergence.</attr>
      <attr name="tolf-max" label="Required determinant value" type="float">Maximum value of the determinant required to assume convergence.</attr>
      <attr name="maxstep" label="Maximum Broyden iteration step">Maximum step in one iteration of root finding. Significant for the Broyden's method only.</attr>
      <attr name="maxiter" label="Maximum number of iterations" type="int">Maximum number of root finding iterations.</attr>
      <attr name="alpha" label="Broyden decrease factor" type="float">Parameter ensuring sufficient decrease of determinant in each step (Broyden method only).</attr>
      <attr name="lambda" label="Minimum Broyden step decrease ratio" type="float">Minimum decrease ratio of one step (Broyden method only).</attr>
      <attr name="initial-range" label="Initial Muller range size" type="complex">Initial range size (Muller method only).</attr>
    </tag>

    <tag name="mirrors" label="Mirror losses">
      <attr name="R1" label="Front reflectivity" type="float">Reflectivity of the front mirror.</attr>
      <attr name="R2" label="Back reflectivity" type="float">Reflectivity of the back mirror.</attr>
    </tag>

    <flow>
      <receiver name="inTemperature"/>
      <receiver name="inGain"/>
      <provider name="outLightMagnitude"/>
      <provider name="outRefractiveIndex"/>
      <provider name="outHeat"/>
    </flow>
  </solver>

  <solver name="Fourier3D" category="optical" lib="slab">
    Vectorial optical solver based on the plane-wave reflection transfer method.

    <geometry type="Cartesian3D"/>

    <tag name="expansion" label="Details on Fourier expansion">
      <attr name="size" label="Expansion sizes" type="int">
        Expansion sizes along longitudinal and transverse directions.
        You cannot set this attribute together with ‘Longitudinal expansion size’ (&lt;tt&gt;size-long&lt;/tt&gt;) and ‘Transverse expansion size’ (&lt;tt&gt;size-tran&lt;/tt&gt;)
      </attr>
      <attr name="size-long" label="Longitudinal expansion size" type="int">
        Expansion size along longitudinal axis.
        You cannot set this attribute together with ‘Expansion sizes’ (&lt;tt&gt;size&lt;/tt&gt;).
      </attr>
      <attr name="size-tran" label="Transverse expansion size" type="int">
        Expansion size along transverse axis.
        You cannot set this attribute together with ‘Expansion sizes’ (&lt;tt&gt;size&lt;/tt&gt;).
      </attr>
      <attr name="refine" label="Averaging points" type="int">
        Number of refinement points for refractive index averaging along longitudinal and transverse directions.
        You cannot set this attribute together with ‘Longitudinal averaging points’ (&lt;tt&gt;refine-long&lt;/tt&gt;) and‘Transverse averaging points’ (&lt;tt&gt;refine-long&lt;/tt&gt;) .
      </attr>
      <attr name="refine-long" label="Longitudinal averaging points" type="int">
        Number of refinement points for refractive index averaging along longitudinal axis.
        You cannot set this attribute together with ‘Averaging points’ (&lt;tt&gt;refine&lt;/tt&gt;).
      </attr>
      <attr name="refine-tran" label="Transverse averaging points" type="int">
        Number of refinement points for refractive index averaging along transverse axis.
        You cannot set this attribute together with ‘Averaging points’ (&lt;tt&gt;refine&lt;/tt&gt;).
      </attr>
      <attr name="smooth" label="Smoothing parameter" type="float">Smoothing parameter for material boundaries (increases convergence).</attr>
      <attr name="group-layers" label="Layers grouping" type="bool">Should similar layers be grouped for better performance.</attr>
    </tag>

    <tag name="interface" label="Matching interface position in the stack &lt;span style=&quot;font-weight: normal;&quot;&gt;(set only one)&lt;/span&gt;">
      Matching interface position in the stack.
      <attr name="index" label="Layer index" type="int">Index of the layer, below which the interface is located.</attr>
      <attr name="position" label="Position" type="float" unit="µm">Interface will be located as close as possible to the vertical coordinate specified in this attribute.</attr>
      <attr name="object" label="Object name">Name of the geometry object below which the interface is located.</attr>
      <attr name="path" label="Object path">Optional path name, specifying particular instance of the object given in the object attribute.</attr>
    </tag>

    <tag name="vpml" label="Vertical PMLs">
      Vertical absorbing perfectly matched layer boundary conditions parameters.
      <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
      <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
      <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
    </tag>

    <tag name="transfer" label="Transfer algorithm settings">
      Vertical field transfer settings.
      <attr name="method" label="Transfer method" type="choice">
        Layers transfer algorithm. Can be either reflection transfer, admittance transfer or automatic, in which case the reflection computations will use reflection transfer and eigenmode search is done with admittance transfer.
        <choice>auto</choice>
        <choice>reflection</choice>
        <choice>admittance</choice>
      </attr>
    </tag>

    <tag name="pmls" label="Longitudinal and transverse PMLs">
      Side absorbing perfectly matched layer boundary conditions parameters.
      <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
      <attr name="order" label="Shape order" type="float">PML shape order (0 → flat, 1 → linearly increasing, 2 → quadratic, etc.).</attr>
      <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
      <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
      <tag name="long" label="Longitudinal PML &lt;span style=&quot;font-weight: normal;&quot;&gt;(overrides ‘Longitudinal and transverse PMLs’)&lt;/span&gt;">
        Parameters of PMLs in longitudinal direction. This overrides the global side PMLs configuration.
        <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
        <attr name="order" label="Shape order" type="float">PML shape order (0 → flat, 1 → linearly increasing, 2 → quadratic, etc.).</attr>
        <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
        <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
      </tag>
      <tag name="tran" label="Transverse PML &lt;span style=&quot;font-weight: normal;&quot;&gt;(overrides ‘Longitudinal and transverse PMLs’)&lt;/span&gt;">
        Parameters of PMLs in transverse direction. This overrides the global side PMLs configuration.
        <attr name="factor" label="Scaling factor" type="complex">PML scaling factor.</attr>
        <attr name="order" label="Shape order" type="float">PML shape order (0 → flat, 1 → linearly increasing, 2 → quadratic, etc.).</attr>
        <attr name="shift" label="Distance" type="float" unit="µm">PML shift from the structure.</attr>
        <attr name="size" label="Size" type="float" unit="µm">PML size.</attr>
      </tag>
    </tag>

    <tag name="mode" label="Mode properties">
      Mode properties.
      <attr name="wavelength" label="Wavelength" type="float" unit="nm">Light wavelength.</attr>
      <attr name="k-tran" label="Transverse wave-vector" type="float" unit="1/µm">Transverse wave-vector component.</attr>
      <attr name="k-long" label="Longitudinal wave-vector" type="float" unit="1/µm">Longitudinal wave-vector component.</attr>
      <attr name="symmetry" label="Mode symmetry" type="choice">
        Mode symmetry. Specify a symmetric field component here (e.g. '&lt;i&gt;Etran&lt;/i&gt;', '&lt;i&gt;Hx&lt;/i&gt;').
        You cannot set this attribute together with ‘Longitudinal mode symmetry’ (&lt;tt&gt;symmetry-long&lt;/tt&gt;) and Transverse mode symmetry’ (&lt;tt&gt;symmetry-long&lt;/tt&gt;).
        <choice>Etran</choice>
        <choice>Elong</choice>
      </attr>
      <attr name="symmetry-long" label="Longitudinal mode symmetry" type="choice">
        Mode symmetry along longitudinal axis. Specify a symmetric field component here (e.g. '&lt;i&gt;Etran&lt;/i&gt;', '&lt;i&gt;Hx&lt;/i&gt;').
        You cannot set this attribute together with ‘Mode symmetries’ (&lt;tt&gt;symmetry&lt;/tt&gt;).
        <choice>Etran</choice>
        <choice>Elong</choice>
      </attr>
      <attr name="symmetry-tran" label="Transverse mode symmetry" type="choice">
        Mode symmetry along transverse axis. Specify a symmetric field component here (e.g. '&lt;i&gt;Etran&lt;/i&gt;', '&lt;i&gt;Hx&lt;/i&gt;').
        You cannot set this attribute together with ‘Mode symmetries’ (&lt;tt&gt;symmetry&lt;/tt&gt;).
        <choice>Etran</choice>
        <choice>Elong</choice>
      </attr>
    </tag>

    <tag name="root" label="Parameters of the root-finding algorithm">
      Parameters of the global root-finding algorithm.
      <attr name="method" label="Root finding method" type="choice">
        Root finding algorithm (Muller's method or Broyden's method).
        <choice>muller</choice>
        <choice>broyden</choice>
        <choice>brent</choice>
      </attr>
      <attr name="tolx" label="Tolerance on argument" type="float">Maximum change of the argument which is allowed for convergent solution.</attr>
      <attr name="tolf-min" label="Sufficient determinant value" type="float">Minimum value of the determinant sufficient to assume convergence.</attr>
      <attr name="tolf-max" label="Required determinant value" type="float">Maximum value of the determinant required to assume convergence.</attr>
      <attr name="maxstep" label="Maximum Broyden iteration step">Maximum step in one iteration of root finding. Significant for the Broyden's method only.</attr>
      <attr name="maxiter" label="Maximum number of iterations" type="int">Maximum number of root finding iterations.</attr>
      <attr name="alpha" label="Broyden decrease factor" type="float">Parameter ensuring sufficient decrease of determinant in each step (Broyden method only).</attr>
      <attr name="lambda" label="Minimum Broyden step decrease ratio" type="float">Minimum decrease ratio of one step (Broyden method only).</attr>
      <attr name="initial-range" label="Initial Muller range size" type="complex">Initial range size (Muller method only).</attr>
    </tag>

    <flow>
      <receiver name="inTemperature"/>
      <receiver name="inGain"/>
      <provider name="outLightMagnitude"/>
      <provider name="outRefractiveIndex"/>
      <provider name="outHeat"/>
      <provider name="outLoss" for="ModalLoss"/>
      <provider name="outWavelenght"/>
    </flow>

  </solver>
</solvers>
