<?xml version="1.0" encoding="utf-8" ?>
<solvers xmlns="http://phys.p.lodz.pl/solvers.xsd">

  <solver name="DriftDiffusion2D" category="electrical" lib="ddm2d">
    Finite element drift-diffusion electrical solver for 2D Cartesian geometry using finite-element method.

    <geometry type="Cartesian2D"/>

    <mesh type="Rectangular2D"/>

    <bcond name="voltage" label="Voltage"/>

    <tag name="loop" label="Configuration of the Self-Consistent Loop">
      Configuration of the self-consistent loop.
      <attr name="stat" label="Statistics" type="choice" default="Maxwell-Boltzmann">
        Statistics assumed in drift-diffusion equations.
        <choice>Maxwell-Boltzmann</choice>
        <choice>Fermi-Dirac</choice>
      </attr>
      <attr name="conttype" label="Type of contacts" type="choice" default="ohmic">
        Type of contacts.
        <choice>ohmic</choice>
        <choice>Schottky</choice>
      </attr>
      <attr name="SchottkyP" label="Schottky barrier for p-type contact" type="float" default="0.">Schottky barrier for p-type contact.</attr>
      <attr name="SchottkyN" label="Schottky barrier for n-type contact" type="float" default="0.">Schottky barrier for n-type contact.</attr>
      <attr name="Rsrh" label="SRH recombination" type="bool" default="no">Consider Shockley-Read-Hall recombination.</attr>
      <attr name="Rrad" label="Radiative recombination" type="bool" default="no">Consider radiative recombination.</attr>
      <attr name="Raug" label="Auger recombination" type="bool" default="no">Consider Auger recombination.</attr>
      <attr name="Pol" label="Polarization effects" type="bool" default="no">Polarization effects.</attr>
      <attr name="FullIon" label="Complete ionization of dopants" type="bool" default="yes">Complete ionization of dopants.</attr>
      <attr name="maxerrVi" label="Max initial potential update" type="float" unit="V" default="1e-6">Limit for the initial potential estimate updates.</attr>
      <attr name="maxerrV0" label="Max built-in potential update" type="float" unit="V" default="1e-6">Limit for the built-in potential updates.</attr>
      <attr name="maxerrV" label="Max potential update" type="float" unit="V" default="1e-6">Limit for the potential updates.</attr>
      <attr name="maxerrFn" label="Max &lt;i&gt;F&lt;sub&gt;n&lt;/sub&gt;&lt;/i&gt; update" type="float" unit="eV" default="1e-4">Limit for the electrons quasi-Fermi level updates.</attr>
      <attr name="maxerrFp" label="Max &lt;i&gt;F&lt;sub&gt;p&lt;/sub&gt;&lt;/i&gt; update" type="float" unit="eV" default="1e-4">Limit for the holes quasi-Fermi level updates.</attr>
      <attr name="loopsVi" label="Initial potential loop limit" type="int" default="10000">Loops limit for the initial potential estimate.</attr>
      <attr name="loopsV0" label="Built-in potential loop limit" type="int" default="200">Loops limit for the built-in potential.</attr>
      <attr name="loopsV" label="Potential loop limit" type="int" default="3">Loops limit for the potential.</attr>
      <attr name="loopsFn" label="&lt;i&gt;F&lt;sub&gt;n&lt;/sub&gt;&lt;/i&gt; loop limit" type="int" default="3">Loops limit for the electrons quasi-Fermi level.</attr>
      <attr name="loopsFp" label="&lt;i&gt;F&lt;sub&gt;p&lt;/sub&gt;&lt;/i&gt; loop limit" type="int" default="3">Loops limit for the holes quasi-Fermi level.</attr>
    </tag>

    <tag name="matrix" label="Matrix Solver">
      Configuration of the matrix solver.
      <attr name="algorithm" label="Solution algorithm" type="choice" default="cholesky">
        Algorithm used for solving set of linear positive-definite equations.
        <choice>cholesky</choice>
        <choice>gauss</choice>
        <choice>iterative</choice>
      </attr>
      <attr name="itererr" label="Max residual error" type="float" default="1e-8">Maximum allowed residual error for the iterative algorithm.</attr>
      <attr name="iterlim" label="Max number of iterations" type="int" default="10000">Maximum number of iterations for the iterative algorithm.</attr>
      <attr name="logfreq" label="Progress logging frequency" type="int" default="500">Number of iterations after which the progress is logged.</attr>
    </tag>

    <flow>
      <receiver name="inTemperature"/>
      <provider name="outPotential"/>
      <provider name="outQuasiFermiEnergyLevelForElectrons"/>
      <provider name="outQuasiFermiEnergyLevelForHoles"/>
      <provider name="outConductionBandEdge"/>
      <provider name="outValenceBandEdge"/>
<!--      <provider name="outCurrentDensity"/>-->
    </flow>
  </solver>

</solvers>
