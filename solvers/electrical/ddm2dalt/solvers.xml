<?xml version="1.0" encoding="utf-8" ?>
<solvers xmlns="http://phys.p.lodz.pl/solvers.xsd">

  <solver name="DriftDiffusion2Dalt" category="electrical" lib="ddm2dalt">
    Finite element drift-diffusion electrical solver for 2D Cartesian geometry using finite-element method.

    <geometry type="Cartesian2D"/>

    <mesh type="Rectangular2D"/>

    <tag name="loop" label="Configuration of the Self-Consistent Loop">
      Configuration of the self-consistent loop.
      <attr name="stat" label="Statistics" type="choice">
        Statistics assumed in drift-diffusion equations.
        <choice>MaxwellBoltzmann</choice>
        <choice>FermiDirac</choice>
      </attr>
      <attr name="maxDelPsi0" label="Max correction for initial potential calculations" type="float">Maximal correction for initial potential calculations (V)</attr>
      <attr name="maxDelPsi" label="Max correction for potential calculations" type="float">Maximal correction for potential calculations (V)</attr>
      <attr name="maxDelFn" label="Max correction for quasi-Fermi levels for electrons calculations" type="float">Maximal correction for quasi-Fermi levels for electrons calculations (eV)</attr>
      <attr name="maxDelFp" label="Max correction for quasi-Fermi levels for holes calculations" type="float">Maximal correction for quasi-Fermi levels for holes calculations (eV)</attr>
      <attr name="maxerrVi" label="Max initial potential update" type="float">Limit for the initial potential estimate updates.</attr>
      <attr name="maxerrV0" label="Max built-in potential update" type="float">Limit for the built-in potential updates.</attr>
      <attr name="maxerrV" label="Max potential update" type="float">Limit for the potential updates.</attr>
      <attr name="maxerrFn" label="Max &lt;i&gt;F&lt;sub&gt;n&lt;/sub&gt;&lt;/i&gt; update" type="float">Limit for the electrons quasi-Fermi level updates.</attr>
      <attr name="maxerrFp" label="Max &lt;i&gt;F&lt;sub&gt;p&lt;/sub&gt;&lt;/i&gt; update" type="float">Limit for the holes quasi-Fermi level updates.</attr>
      <attr name="loopsVi" label="Initial potential loop limit" type="float">Loops limit for the initial potential estimate.</attr>
      <attr name="loopsV0" label="Built-in potential loop limit" type="float">Loops limit for the built-in potential.</attr>
      <attr name="loopsV" label="Potential loop limit" type="float">Loops limit for the potential.</attr>
      <attr name="loopsFn" label="&lt;i&gt;F&lt;sub&gt;n&lt;/sub&gt;&lt;/i&gt; loop limit" type="float">Loops limit for the electrons quasi-Fermi level.</attr>
      <attr name="loopsFp" label="&lt;i&gt;F&lt;sub&gt;p&lt;/sub&gt;&lt;/i&gt; loop limit" type="float">Loops limit for the holes quasi-Fermi level.</attr>
    </tag>

    <tag name="matrix" label="Matrix Solver">
      Configuration of the matrix solver.
      <attr name="algorithm" label="Solution algorithm" type="choice">
        Algorithm used for solving set of linear positive-definite equations.
        <choice>cholesky</choice>
        <choice>gauss</choice>
        <choice>iterative</choice>
      </attr>
      <attr name="itererr" label="Max residual error" type="float">Maximum allowed residual error for the iterative algorithm.</attr>
      <attr name="iterlim" label="Max number of iterations" type="int">Maximum number of iterations for the iterative algorithm.</attr>
      <attr name="logfreq" label="Progress logging frequency" type="int">Number of iterations after which the progress is logged.</attr>
    </tag>

    <bcond name="voltage" label="Voltage"/>

    <flow>
      <receiver name="inTemperature"/>
      <provider name="outPotential"/>
      <provider name="outQuasiFermiEnergyLevelForElectrons"/>
      <provider name="outQuasiFermiEnergyLevelForHoles"/>
      <provider name="outConductionBandEdge"/>
      <provider name="outValenceBandEdge"/>
<!--      <provider name="outCurrentDensity"/>-->
    </flow>
  </solver>

</solvers>
